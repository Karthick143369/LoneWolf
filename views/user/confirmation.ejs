<%- include('../layouts/user/header',{title:"LoneWolf"}) %>

<!-- Start Banner Area -->
<section class="banner-area organic-breadcrumb">
    <div class="container">
        <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-start">
            <div class="col-first">
                <h1>Order Confirmation</h1>
                <nav class="d-flex align-items-center">
                    <a href="/">Home</a> &nbsp;/&nbsp; <span>Order Confirmation</span>
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- End Banner Area -->

<!--================Order Details Area =================-->
<section class="order_details section_gap">
    <div class="container">
        <div class="confirmation-message text-center mb-5">
            <i class="fas fa-check-circle fa-4x text-success mb-3"></i>
            <h3 class="title_confirmation">Thank you. Your order has been received.</h3>
        </div>

        <% if(order) { %>
        <div class="row order_d_inner mb-5">
            <div class="col-lg-4 mb-4">
                <div class="details_item card p-4">
                    <h4 class="card-title">Order Info</h4>
                    <ul class="list-unstyled">
                        <li><span class="fw-bold">Order number:</span> <%= order._id.toString().slice(0,6) %></li>
                        <li><span class="fw-bold">Date:</span> <%= order.dateOrdered.toDateString() %></li>
                        <li><span class="fw-bold">Total:</span> ₹<%= order.totalPrice %></li>
                        <li><span class="fw-bold">Payment method:</span> <%= order.paymentMethod %></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 mb-4">
                <div class="details_item card p-4">
                    <h4 class="card-title">Billing Address</h4>
                    <ul class="list-unstyled">
                        <% order.billingAddress.forEach(addr => { %>
                        <li><span class="fw-bold">Street:</span> <%= addr.street %></li>
                        <li><span class="fw-bold">City:</span> <%= addr.city %></li>
                        <li><span class="fw-bold">Country:</span> <%= addr.country %></li>
                        <li><span class="fw-bold">Postcode:</span> <%= addr.pinCode %></li>
                        <% }) %>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 mb-4">
                <div class="details_item card p-4">
                    <h4 class="card-title">Shipping Address</h4>
                    <ul class="list-unstyled">
                        <% order.billingAddress.forEach(addr => { %>
                        <li><span class="fw-bold">Street:</span> <%= addr.street %></li>
                        <li><span class="fw-bold">City:</span> <%= addr.city %></li>
                        <li><span class="fw-bold">Country:</span> <%= addr.country %></li>
                        <li><span class="fw-bold">Postcode:</span> <%= addr.pinCode %></li>
                        <% }) %>
                    </ul>
                </div>
            </div>
        </div>

        <div class="order_details_table card p-4">
            <h2 class="mb-4">Order Details</h2>
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead class="table-light">
                        <tr>
                            <th scope="col">Product</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if(order.productItems && order.productItems.length > 0) { %>
                        <% order.productItems.forEach(product => { %>
                        <tr>
                            <td><%= product.productName %></td>
                            <td>x <%= product.quantity %></td>
                            <td>₹<%= product.total %>.00</td>
                        </tr>
                        <% }) %>
                        <% } else { %>
                        <tr>
                            <td colspan="3" class="text-center">No products found in the order.</td>
                        </tr>
                        <% } %>
                        <tr>
                            <td><h5>Subtotal</h5></td>
                            <td></td>
                            <td><h5>₹<%= order.totalPrice %>.00</h5></td>
                        </tr>
                        <tr>
                            <td><h5>Discount</h5></td>
                            <td></td>
                            <td><h5>₹0.00</h5></td>
                        </tr>
                        <tr class="table-active">
                            <td><h4>Total</h4></td>
                            <td></td>
                            <td><h4>₹<%= order.totalPrice %>.00</h4></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <% } else { %>
        <div class="alert alert-warning text-center" role="alert">
            No order found.
        </div>
        <% } %>
    </div>
</section>
<!--================End Order Details Area =================-->

<%- include('../layouts/user/footer') %>

<!-- Add Font Awesome for Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<!-- Add Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Add Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>